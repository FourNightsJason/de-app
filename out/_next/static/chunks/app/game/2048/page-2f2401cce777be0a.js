(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[926],{1074:function(e,o,r){Promise.resolve().then(r.bind(r,8426))},8426:function(e,o,r){"use strict";r.r(o),r.d(o,{default:function(){return y}});for(var t,n=r(7437),i=r(2265),a=r(9794),l=r.n(a),s={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},u=new Uint8Array(16),c=[],d=0;d<256;++d)c.push((d+256).toString(16).slice(1));var f=function(e,o,r){if(s.randomUUID&&!o&&!e)return s.randomUUID();var n=(e=e||{}).random||(e.rng||function(){if(!t&&!(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(u)})();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,o){r=r||0;for(var i=0;i<16;++i)o[r+i]=n[i];return o}return function(e,o=0){return(c[e[o+0]]+c[e[o+1]]+c[e[o+2]]+c[e[o+3]]+"-"+c[e[o+4]]+c[e[o+5]]+"-"+c[e[o+6]]+c[e[o+7]]+"-"+c[e[o+8]]+c[e[o+9]]+"-"+c[e[o+10]]+c[e[o+11]]+c[e[o+12]]+c[e[o+13]]+c[e[o+14]]+c[e[o+15]]).toLowerCase()}(n)},p=function(){for(var e,o,r=0,t="",n=arguments.length;r<n;r++)(e=arguments[r])&&(o=function e(o){var r,t,n="";if("string"==typeof o||"number"==typeof o)n+=o;else if("object"==typeof o){if(Array.isArray(o)){var i=o.length;for(r=0;r<i;r++)o[r]&&(t=e(o[r]))&&(n&&(n+=" "),n+=t)}else for(t in o)o[t]&&(n&&(n+=" "),n+=t)}return n}(e))&&(t&&(t+=" "),t+=o);return t},m=r(2599),h=r.n(m);function g(e){let{position:o,member:r}=e,[t,a]=(0,i.useState)();return(0,i.useEffect)(()=>{a({x:94*Math.floor(o%4),y:94*Math.floor(o/4)})},[o]),(0,n.jsx)("div",{className:l().block,style:{top:(null==t?void 0:t.y)+"px",left:(null==t?void 0:t.x)+"px"},children:["清","君","宝","榕","超","德","梅","胜","诺","D"].map((e,o)=>(0,n.jsx)("span",{className:p({[l().active]:r.includes(o)}),children:e},o))})}let b=[];function y(){let[e,o]=(0,i.useState)([]),[r,t]=(0,i.useState)(!0),a=(e,o,r)=>{let t=h().cloneDeep(e),n=r.findIndex(e=>e.position===o),i=r[n],a=t.member.length,l=i.member.length,s=[...new Set([...t.member,...i.member])];return{canCombind:s.length===a+l&&!i.isCombind,member:s,frontIndex:n}},s=(0,i.useCallback)((e,o)=>{let r={ArrowLeft:-1,ArrowUp:-4,ArrowRight:1,ArrowDown:4}[e];b=[];let t=h().cloneDeep(o),n=h().cloneDeep(t).sort((e,o)=>(o.position-e.position)*r),i=Array.from([,,,,],(o,r)=>"ArrowUp"===e?r:"ArrowLeft"===e?4*r:"ArrowRight"===e?4*r+3:"ArrowDown"===e?r+12:void 0);return n.forEach(e=>{let o=t.find(o=>o.key===e.key);if(!i.includes(o.position)){let e=o.position+r;if(b.includes(e)){let{canCombind:r,member:n,frontIndex:i}=a(o,e,t);r&&(o.position=e,o.member=n,o.isCombind=!0,t.splice(i,1))}else o.position=e}b.push(o.position)}),t},[]),u=(0,i.useCallback)(r=>{if(["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(r.code)){let n,i=h().cloneDeep(e);do n=h().cloneDeep(i),i=s(r.code,i);while(!h().isEqual(n,i));i.forEach(e=>{e.isCombind=!1}),o(i),i.length<16&&!h().isEqual(i,e)&&t(!0)}},[e,s]);return(0,i.useEffect)(()=>(document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)}),[u]),(0,i.useEffect)(()=>{if((null==b?void 0:b.length)<16&&r){let r={key:f(),position:(()=>{let e;let o=()=>Math.floor(16*Math.random());do e=o();while(b.includes(e));return b.push(e),e})(),member:[Math.floor(10*Math.random())],isCombind:!1};t(!1),o([...e,r])}},[e,r]),(0,n.jsx)("div",{className:l().game2048,children:(0,n.jsxs)("div",{className:l().gamebox,children:[Array(16).fill("").map((e,o)=>(0,n.jsx)("div",{className:l().grid,children:o},o)),e.map(e=>{let{key:o,...r}=e;return(0,n.jsx)(g,{...r},o)})]})})}},9794:function(e){e.exports={game2048:"page_game2048__oGHJu",gamebox:"page_gamebox__8BoU_",grid:"page_grid__UddsI",block:"page_block__2BK8a",blockCreate:"page_blockCreate__EVYfK",active:"page_active__TjKj_"}}},function(e){e.O(0,[382,866,971,23,744],function(){return e(e.s=1074)}),_N_E=e.O()}]);